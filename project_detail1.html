<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Project Detail</title>
    <link rel="stylesheet" href="project_style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism-tomorrow.min.css">
</head>
<body>
    <header>
        <nav> 
            <ul>
                <li><a href="index.html#home">Home</a></li>
                <li><a href="index.html#about">About Me</a></li>
                <li><a href="index.html#portfolio">Portfolio</a></li>
                <li><a href="index.html#contact">Contact</a></li>
            </ul>
        </nav>
    </header>
        <section id="project-detail">
            <h2>Server Hardening Automation</h2>
            <h3>Project</h3>
            <p>This project involved building comprehensive server hardening scripts using Bash.</p>
            <h3>Project Goals</h3>
            <p>The main goal of this project was to automate server hardening using multiple scripts while making it cross-compatible with other linux systems.</p>
            <h3>Challenges Faced</h3>
            <p>One of the main challenges faced during this project was ensuring cross-system compatibility.</p>
            <h3>Technologies Used</h3>
            <p>Bash</p>
            <h3>Project Duration</h3>
            <p>Two weeks</p>
            <h3>Outcomes Achieved</h3>
            <p>The scipt was successfully debugged and tested while ensuring cross-system compatibility.</p>
            <h3>Code</h3>
            <pre><code class="language-bash">
                #!/bin/bash
                # Main script
                source firewall.sh
                source usr_man.sh
                source up_soft.sh
                source ap_arm_sel.sh
                source dns_sec.sh
                source dys_net_proto.sh
                source enab_2fa.sh
                source file_sys_sec.sh
                source fil_int_chek.sh
                source hard_con.sh
                source hard_kern.sh
                source hard_net.sh
                source hard_ntp.sh
                source ids_set.sh
                source imp_log.sh
                source imp_sel.sh
                source kern_param_hard.sh
                source mon_log.sh
                source pas_pol.sh
                source sec_aud.sh
                source sec_boot_con.sh
                source sec_patch.sh
                source sec_sha_mem.sh
                source sec_temp_fil.sh
                source ssh_key_sec.sh
                source ssh_sec.sh
                source sys_aud.sh
                source time_sync.sh
                
                LOG_FILE="hardening_log.txt"
                touch $LOG_FILE
                
                log() {
                    echo "$(date) - $1" >> $LOG_FILE
                }
                
                usage() {
                    echo "Usage: $0 [options]"
                    echo "Options:"
                    echo "  -h, --help "
                    echo "  --firewall "
                    echo "  --usr-man "
                    echo "  --up-soft "
                    echo "  --ap-arm-sel "
                    echo "  --dns-sec "
                    echo "  --dys-net-proto "
                    echo "  --enab-fa "
                    echo "  --file-sys-sec "
                    echo "  --fil-int-chek "
                    echo "  --hard-con "
                    echo "  --hard-kern "
                    echo "  --hard-net "
                    echo "  --hard-ntp "
                    echo "  --ids-set "
                    echo "  --imp-log "
                    echo "  --imp-sel "
                    echo "  --kern-param-hard "
                    echo "  --mon-log "
                    echo "  --pas-pol "
                    echo "  --sec-aud "
                    echo "  --sec-boot-con "
                    echo "  --sec-patch "
                    echo "  --sec-sha-mem "
                    echo "  --sec-temp-fil "
                    echo "  --ssh-key-sec "
                    echo "  --ssh-sec "
                    echo "  --sys-aud "
                    echo "  --time-sync "
                
                    exit 1
                }
                
                while [[ $# -gt 0 ]]; do
                    key="$1"
                    case $key in
                        -h|--help)
                            usage
                            ;;
                        --firewall)
                            enable_firewall
                            ;;
                        --usr-man)
                            manage_users
                            ;;
                        --up-soft)
                            update_packages
                            ;;
                        --ap-arm-sel)
                	        implement_apparmor_selinux
                	        ;;
                    	--dns-sec)
                    	    enhance_dns_security
                    	    ;;
                    	--dys-net-proto)
                    	    disable_unused_protocols
                            ;;
                    	--enab-fa)
                    	    enable_two_factor_auth
                    	    ;;
                    	--file-sys-sec)
                    	    secure_file_system
                    	    ;;
                    	--fil-int-chek)
                    	    check_file_integrity
                    	    ;;
                    	--hard-con)
                    	    ;;
                    	--hard-kern)
                    	    harden_kernel
                    	    ;;
                    	--hard-net)
                    	    harden_network
                    	    ;;
                    	--hard-ntp)
                    	    harden_ntp_configuration
                    	    ;;
                    	--ids-set)
                    	    setup_ids
                    	    ;;
                    	--imp-log)
                    	    improve_logging_monitoring
                    	    ;;
                    	--imp-sel)
                    	    implement_selinux
                    	    ;;
                    	--kern-param-hard)
                    	    harden_kernel_parameters
                    	    ;;
                    	--mon-log)
                    	    enable_logging
                    	    ;;
                    	--pas-pol)
                    	    improve_password_policies
                    	    ;;
                    	--sec-aud)
                    	    perform_audit
                    	    ;;
                    	--sec-boot-con)
                    	    secure_boot_configuration
                    	    ;;
                    	--sec-patch)
                    	    apply_security_patches
                    	    ;;
                    	--sec-sha-mem)
                    	    secure_shared_memory
                    	    ;;
                    	--sec-temp-fil)
                    	    secure_temp_file_handling
                    	    ;;
                    	--ssh-key-sec)
                    	    enhance_ssh_security
                    	    ;;
                    	--ssh-sec)
                    	    configure_ssh
                    	    ;;
                    	--sys-aud)
                    	    audit_system
                    	    ;;
                    	--time-sync)
                    	    secure_time_synchronization
                    	    ;;
                    	)
                
                        *)
                            echo "Unknown option: $key"
                            usage
                            ;;
                    esac
                    shift
                done
                
                main() {
                    echo "Starting Linux server hardening..."
                    enable_firewall
                    manage_users
                    update_packages
                    implement_apparmor_selinux
                    enhance_dns_security
                    disable_unused_protocols
                    enable_two_factor_auth
                    secure_file_system
                    check_file_integrity
                    harden_kernel
                    harden_network
                    harden_ntp_configuration
                    setup_ids
                    improve_logging_monitoring
                    implement_selinux
                    harden_kernel_parameters
                    enable_logging
                    improve_password_policies
                    perform_audit
                    secure_boot_configuration
                    apply_security_patches
                    secure_shared_memory
                    secure_temp_file_handling
                    enhance_ssh_security
                    configure_ssh
                    audit_system
                    secure_time_synchronization
                    echo "Linux server hardening completed."
                }
                main 
                
                #!/bin/bash
                # ap_arm_sel.sh
                implement_apparmor_selinux() {
                
                    sudo apt-get install apparmor -y
                    sudo systemctl enable apparmor
                    sudo systemctl start apparmor
                    sudo aa-enforce /etc/apparmor.d/usr.sbin.apache2
                
                    log "AppArmor or SELinux implemented."
                } 
                
                #!/bin/bash
                # dns_sec.sh
                enhance_dns_security() {
                
                    echo "options timeout:2 attempts:2" | sudo tee -a /etc/resolv.conf
                    echo "options single-request-reopen" | sudo tee -a /etc/resolv.conf
                
                    sudo iptables -A OUTPUT -p udp --dport 53 -m owner ! --uid-owner named -j DROP
                
                    log "DNS security enhanced."
                }
                
                #!/bin/bash
                # dys_net_proto.sh
                disable_unused_protocols() {
        
                    sudo modprobe -r dccp
                    sudo modprobe -r sctp
                    sudo modprobe -r rds
                    sudo modprobe -r tipc
                
                    echo "install dccp /bin/true" | sudo tee -a /etc/modprobe.d/disable-dccp.conf
                    echo "install sctp /bin/true" | sudo tee -a /etc/modprobe.d/disable-sctp.conf
                    echo "install rds /bin/true" | sudo tee -a /etc/modprobe.d/disable-rds.conf
                    echo "install tipc /bin/true" | sudo tee -a /etc/modprobe.d/disable-tipc.conf
                
                    log "Unused network protocols disabled."
                }
                
                #!/bin/bash
                # enab_2fa.sh
                enable_two_factor_auth() {
        
                    sudo apt-get install libpam-google-authenticator -y
                    google-authenticator
                
                    echo "auth required pam_google_authenticator.so" | sudo tee -a /etc/pam.d/sshd
                
                    sudo systemctl restart sshd
                
                    log "Two-factor authentication enabled."
                }
                
                #!/bin/bash
                # fil_sys_sec.sh
                secure_file_system() {
        
                    sudo chmod 600 /etc/passwd /etc/shadow /etc/group /etc/gshadow
                    sudo chmod 700 /root
                
                    sudo mount -o remount,noexec /tmp
                    sudo mount -o remount,noexec /dev/shm
                
                    log "File system security enhanced."
                }
                
                #!/bin/bash
                # fil_int_chek.sh
                check_file_integrity() {
        
                    sudo apt-get install aide -y
                    sudo aideinit
                
                    sudo mv /etc/cron.daily/aide /etc/cron.weekly/
                
                    log "System file integrity checking configured."
                }
                
                #!/bin/bash
                # firewall.sh
                enable_firewall() {
        
                    sudo systemctl start firewalld
                    sudo systemctl enable firewalld
                
                    sudo firewall-cmd --zone=public --add-service=http --permanent
                    sudo firewall-cmd --zone=public --add-service=https --permanent
                
                    sudo firewall-cmd --reload
                
                    log "Firewall enabled and configured."
                }
                
                #!/bin/bash
                # hard_kern.sh
                harden_kernel() {
        
                    sudo sysctl -w kernel.randomize_va_space=2
                    sudo sysctl -w kernel.exec-shield=1
                    sudo sysctl -w kernel.modules_disabled=1
                
                    echo "kernel.randomize_va_space=2" | sudo tee -a /etc/sysctl.conf
                    echo "kernel.exec-shield=1" | sudo tee -a /etc/sysctl.conf
                    echo "kernel.modules_disabled=1" | sudo tee -a /etc/sysctl.conf
                    sudo sysctl -p
                
                    log "Kernel hardened."
                }
                
                #!/bin/bash
                # hard_net.sh
                harden_network() {
        
                    echo "net.ipv6.conf.all.disable_ipv6 = 1" | sudo tee -a /etc/sysctl.conf
                    sudo sysctl -p
                
                    echo "net.ipv4.tcp_syncookies = 1" | sudo tee -a /etc/sysctl.conf
                    sudo sysctl -p
                
                    log "Network hardened."
                }
                
                #!/bin/bash
                # hard_ntp.sh
                harden_ntp_configuration() {
        
                    echo "restrict default kod nomodify notrap nopeer noquery" | sudo tee -a /etc/ntp.conf
                    echo "restrict -6 default kod nomodify notrap nopeer noquery" | sudo tee -a /etc/ntp.conf
                
                    echo "listen on 127.0.0.1" | sudo tee -a /etc/ntp.conf
                
                    sudo systemctl restart ntp
                
                    log "NTP configuration hardened."
                }
                
                #!/bin/bash
                # hard_serv.sh
                harden_services() {
        
                    sudo systemctl disable <service_name>
                    sudo sed -i 's/Listen 80/Listen 192.168.1.100:80/' /etc/httpd/conf/httpd.conf
                
                    log "Services hardened."
                }
                
                #!/bin/bash
                # ids_set.sh
                setup_ids() {

                    sudo apt-get install fail2ban -y
                    sudo systemctl enable fail2ban
                    sudo systemctl start fail2ban
                
                    log "Intrusion detection system set up."
                }
                
                #!/bin/bash
                # imp_log.sh
                improve_logging_monitoring() {
                
                    sudo apt-get install syslog-ng -y
                
                    log "Logging and monitoring improved."
                }
            
                #!/bin/bash
                # imp_sel.sh
                implement_selinux() {
                
                    sudo apt-get install selinux-utils -y
                    sudo setenforce 1
                
                    log "SELinux implemented and set to enforcing mode."
                }
            
                #!/bin/bash
                # kern_param_hard.sh
                harden_kernel_parameters() {

                    echo "kernel.dmesg_restrict = 1" | sudo tee -a /etc/sysctl.conf
                    echo "kernel.kptr_restrict = 2" | sudo tee -a /etc/sysctl.conf
                
                    sudo sysctl -p
                
                    log "System kernel parameters hardened."
                }

                #!/bin/bash
                # mon_log.sh
                enable_logging() {

                    sudo systemctl start rsyslog
                    sudo systemctl enable rsyslog
                
                    sudo cp /etc/logrotate.conf /etc/logrotate.conf.bak
                    echo "/var/log/myapp.log {
                        weekly
                        rotate 4
                        compress
                        missingok
                        notifempty
                    }" | sudo tee -a /etc/logrotate.conf
                
                    sudo systemctl restart rsyslog
                
                    log "Log monitoring enabled and configured."
                }
            
                #!/bin/bash
                # pas_pol.sh
                improve_password_policies() {
                
                    sudo apt-get install libpam-cracklib -y
                    echo "password requisite pam_cracklib.so retry=3 minlen=8 difok=3 dcredit=-1 ucredit=-1 ocredit=-1 lcredit=-1" | sudo tee -a /etc/pam.d/common-password
                
                    sudo chage --maxdays 90 <username>
                
                    log "Password policies improved."
                }
            
                #!/bin/bash
                # sec_aud.sh
                perform_audit() {
                
                    sudo lynis audit system
                
                    log "Security audit completed."
                }
            
                #!/bin/bash
                # sec_boot_con.sh
                secure_boot_configuration() {
                
                    sudo chmod 0700 /boot/grub/grub.cfg
                    sudo chmod 0700 /boot/grub/grub.cfg-*
                
                    sudo grub-mkpasswd-pbkdf2 | sudo tee /boot/grub/grub.cfg > /dev/null
                    sudo sed -i '/^GRUB_CMDLINE_LINUX=/ s/"$/ grub_password=HASH"/' /etc/default/grub
                    sudo update-grub
                
                    log "Boot configuration secured."
                }
            
                #!/bin/bash
                # sec_patch.sh
                apply_security_patches() {
                
                    sudo yum update --security -y
                    sudo apt-get upgrade --only-upgrade -y
                
                    log "Security patches applied."
                }
            
                #!/bin/bash
                # sec_sha_mem.sh
                secure_shared_memory() {
                
                    echo "none /run/shm tmpfs rw,noexec,nosuid,nodev 0 0" | sudo tee -a /etc/fstab
                    sudo mount -o remount /run/shm
                
                    log "Shared memory security configured."
                }
            
                #!/bin/bash
                # sec_temp_fil.sh
                secure_temp_file_handling() {
                
                    sudo chmod 1777 /tmp
                    sudo chmod 1777 /var/tmp
                
                    sudo cp -p /etc/fstab /etc/fstab.bak
                    echo "tmpfs /tmp tmpfs defaults,noexec,nosuid 0 0" | sudo tee -a /etc/fstab
                    echo "tmpfs /var/tmp tmpfs defaults,noexec,nosuid 0 0" | sudo tee -a /etc/fstab
                    sudo mount -o remount /tmp
                    sudo mount -o remount /var/tmp
                
                    log "Temporary file handling secured."
                }
            
                #!/bin/bash
                # ssh_key_sec.sh
                enhance_ssh_security() {
                
                    sudo sed -i 's/#PasswordAuthentication yes/PasswordAuthentication no/' /etc/ssh/sshd_config
                
                    sudo sed -i 's/#PubkeyAuthentication yes/PubkeyAuthentication yes/' /etc/ssh/sshd_config
                
                    sudo systemctl restart sshd
                
                    log "SSH security enhanced with key-based authentication."
                }
            
                #!/bin/bash
                # ssh_sec.sh
                configure_ssh() {
                
                    sudo cp /etc/ssh/sshd_config /etc/ssh/sshd_config.bak
                
                    sudo sed -i 's/PermitRootLogin yes/PermitRootLogin no/' /etc/ssh/sshd_config
                    sudo sed -i 's/#PasswordAuthentication yes/PasswordAuthentication no/' /etc/ssh/sshd_config
                
                    echo "AllowUsers user1 user2" | sudo tee -a /etc/ssh/sshd_config
                
                    sudo systemctl reload sshd
                
                    log "SSH configuration hardened."
                }
            
                #!/bin/bash
                # sys_aud.sh
                audit_system() {
                
                    sudo apt-get install auditd -y
                    sudo systemctl enable auditd
                    sudo systemctl start auditd
                
                    sudo auditctl -a always,exit -F arch=b64 -S execve -k audit_execve
                    sudo auditctl -a always,exit -F arch=b32 -S execve -k audit_execve
                    sudo auditctl -a always,exit -F arch=b64 -S execveat -k audit_execve
                    sudo auditctl -a always,exit -F arch=b32 -S execveat -k audit_execve
                
                    log "System auditing configured."
                }
            
                #!/bin/bash
                # time_sync.sh
                secure_time_synchronization() {
                
                    echo "restrict -4 default kod nomodify notrap nopeer noquery" | sudo tee -a /etc/ntp.conf
                    echo "restrict -6 default kod nomodify notrap nopeer noquery" | sudo tee -a /etc/ntp.conf
                
                    sudo systemctl restart ntp
                
                    log "System time synchronization secured."
                }
            
                #!/bin/bash
                # up_soft.sh
                update_packages() {
                
                    sudo yum update -y
                    sudo apt-get update && sudo apt-get upgrade -y
                
                    log "Software packages updated."
                }
            
                #!/bin/bash
                # usr_man.sh
                manage_users() {
                
                    sudo usermod -L <username>
                
                    sudo passwd --maxdays 90 <username>
                
                    sudo usermod -s /sbin/nologin <username>
                
                    log "User management tasks completed."
                }</code></pre>
        </section>
        <script>
            document.addEventListener('contextmenu', function(e) {
                e.preventDefault();
            });
            document.addEventListener('selectstart', function(e) {
                e.preventDefault();
            });
            document.addEventListener('keydown', function(e) {
                if ((e.ctrlKey && e.key === 'c') || (e.ctrlKey && e.key === 'u')) {
                    e.preventDefault();
                }
            });
            document.addEventListener('dragstart', function(e) {
                e.preventDefault();
            });
        </script>
    <footer>
        <p>&copy; 2024 Personal Portfolio. All rights reserved.</p>
    </footer>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/prism.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-bash.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
</body>
</html>
